package com.ctl.cpms.dao;

import com.ctl.cpms.domain.User;
import org.hibernate.Criteria;
import org.hibernate.classic.Session;
import org.hibernate.criterion.Restrictions;

import java.util.List;

public class UserDao {

    private Session session;

    public UserDao(Session session) {
        this.session = session;
    }

    public List<User> findAllUsers() {
        Criteria criteria = session.createCriteria(User.class);
        return criteria.list();
    }

    public void createUser(User user) {
        session.saveOrUpdate(user);
    }

    public User findByUsernameAndPassword(String username, String password) {
        Criteria criteria = session.createCriteria(User.class);
        criteria.add(Restrictions.eq("cuid", username));
        criteria.add(Restrictions.eq("password", password));
        return (User) criteria.uniqueResult();
    }

}
