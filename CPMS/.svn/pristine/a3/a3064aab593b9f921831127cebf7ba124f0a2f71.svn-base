package centurylink.cpms;

import java.util.List;
import java.util.Map;

import javax.print.DocFlavor.STRING;

import org.apache.struts2.interceptor.SessionAware;

import com.opensymphony.xwork2.ActionSupport;
import com.opensymphony.xwork2.ModelDriven;

public class RouteAction extends ActionSupport implements ModelDriven,SessionAware {
	
	private Routes routes=new Routes();
	private static ServiceInterface serviceObj =new ServiceLayer();
	private Map<String, Object> sessionMap;
	
	
	@Override
	public void setSession(Map sessionMap) {
		// TODO Auto-generated method stub
		this.sessionMap=sessionMap;
	}
	

	
	@Override
	public Object getModel() {
		// TODO Auto-generated method stub
		return routes;
	}

	
	
	public RouteAction() {
		//super();
		// TODO Auto-generated constructor stub
	}

	public Routes getRoutes() {
		return routes;
	}

	public void setRoutes(Routes routes) {
		this.routes = routes;
	}

	public String fillSearchList()
	{
		System.out.println("RouteAction-Search Routes");

		System.out.println((User)sessionMap.get("user"));
		User user = (User)sessionMap.get("user");
		
		if(sessionMap.get("user")!=null)
		{
		List toList = serviceObj.fillList(0);
		List fromList = serviceObj.fillList(1);
			
		}
		return SUCCESS;
	}
	

	public String searchRoutes() 
{
	System.out.println("RouteAction-Search Routes");

	System.out.println((User)sessionMap.get("user"));
	User user = (User)sessionMap.get("user");
	
	if(sessionMap.get("user")!=null)
	{
//	List list = serviceObj.searchUserRoutes();
		
	}
	return SUCCESS;
}

public String updateRoutes()
{System.out.println("RouteAction-Update Routes");


return SUCCESS;
	
}


	public String addRoute() throws Exception {
		System.out.println("RouteAction-add route");
		System.out.println((User)sessionMap.get("user"));
		User user = (User)sessionMap.get("user");
		
		if(sessionMap.get("user")!=null)
		{
				String bls=serviceObj.addUserRoutes(routes,user.getCid());
				String blsTransit = serviceObj.addUserTransit(routes,user.getCid());
			if (bls.equals("ok")) {
				return SUCCESS;
			}
			else if (bls.equals("iat")) {
				//ssetMessage("The CUID is already registered");
				return "iat";
	
			}	else {
				//setMessage("Registeration Failed. PLease Retry");
				return ERROR;
			}
		}
		
		else
			return ERROR;
	
	}

	
	

}
