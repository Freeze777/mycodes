import java.io.*;
import java.util.*;

import algo.GlobalUtils;
/*
4 5 9 
11 12 13 14 15
21 22 23 24 25
31 32 33 34 35
41 42 43 44 45
 */
public class MatrixRotation {

	public static void main(String[] args) {

		Scanner sc = new Scanner(System.in);
		int row = sc.nextInt();
		int col = sc.nextInt();
		int k = sc.nextInt();
		int[][] matrix = new int[row][col];
		
		for (int i = 0; i < row; i++)
			for (int j = 0; j < col; j++)
				matrix[i][j] = sc.nextInt();
		int nRings = (Math.min(row, col)) / 2;
		int maxRingLen=2*(row+col-2);
		int[][] rings=new int[nRings][maxRingLen];
		int[] ringLen=new int[nRings];
		for (int i = 0; i < nRings; i++) {
			 ringLen[i]= 2 * ((row - 2*i) + (col - 2*i) - 2);
			int index=0;
			int top = i, bottom = row - i - 1, left = i, right = col - i - 1;
			for (int j = left; j <= right; j++,index++)
				rings[i][index]=matrix[top][j];
			for (int j = top + 1; j <= bottom; j++,index++)
				rings[i][index]=matrix[j][right];
			for (int j = right - 1; j >= left; j--,index++)
				rings[i][index]=matrix[bottom][j];
			for (int j = bottom - 1; j >= top + 1; j--,index++)
				rings[i][index]=matrix[j][left];

		}

		GlobalUtils.printArray(rings);
		GlobalUtils.printArray(ringLen);

		sc.close();
	}

}