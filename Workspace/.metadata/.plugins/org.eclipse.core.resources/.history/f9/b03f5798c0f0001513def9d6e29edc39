import java.io.*;
import java.util.*;


public class Solution {

    public static void main(String[] args) {
	

	Scanner sc=new Scanner(System.in);
	int row=sc.nextInt();
	int col=sc.nextInt();
	int[][] matrix=new int[row][col];
	for(int i=0;i<row;i++)
	for(int j=0;j<col;j++)
		matrix[i][j]=sc.nextInt();
	int nRings=(Math.min(row,col))/2;
	int tRow=row,tCol=col;
	Map<Integer,ArrayList<Integer>> rings=new HashMap<Integer,ArrayList<Integer>>();
	for(int i=0;i<nRings;i++)
	{
		int ringSize=2*((row-i)+(col-i)-2);
		int top=i,bottom=row-i-1,left=i,right=col-i-1;
		ArrayList<Integer> tmp=new ArrayList<Integer>();

		for(int j=left;j<=right;j++)
			tmp.add(matrix[top][j]);
		for(int j=top+1;j<=bottom;j++)
			tmp.add(matrix[j][right]);
		for(int j=right-1;j>=left;j--)
			tmp.add(matrix[bottom][j]);
		for(int j=bottom-1;j>=top+1;j--)
			tmp.add(matrix[j][left]);

		rings.put(i,tmp);
		
	}
	

	System.out.println(rings);
	
	
    }


}